<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ойын Дөңгелегі - Казахстанская игра</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', 'Helvetica', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0a3d62 0%, #1e5f8a 100%);
            color: #f0f8ff;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        .dark-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 215, 0, 0.05) 0%, transparent 50%);
        }

        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
            background: rgba(10, 61, 98, 0.9);
            border-radius: 50px;
            padding: 8px;
            border: 2px solid #ffd700;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .lang-btn {
            background: transparent;
            border: none;
            color: #f0f8ff;
            padding: 8px 16px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .lang-btn.active {
            background: #ffd700;
            color: #0a3d62;
        }

        .lang-btn:hover {
            transform: scale(1.05);
        }

        .lang-flag {
            width: 24px;
            height: 16px;
            border-radius: 2px;
            background-size: cover;
            background-position: center;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .ru-flag {
            background: linear-gradient(to bottom, white 33%, #0039a6 33%, #0039a6 66%, #d52b1e 66%);
        }

        .kz-flag {
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Flag_of_Kazakhstan.svg/2560px-Flag_of_Kazakhstan.svg.png');
            background-size: cover;
            background-position: center;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding-top: 10px;
        }

        .flag-container {
            width: 100%;
            height: 150px;
            margin-bottom: 20px;
            border-radius: 10px 10px 0 0;
            overflow: hidden;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            background: #0a3d62;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #kazakhFlag {
            width: 100%;
            height: 100%;
            object-fit: contain;
            background: #00afca;
        }

        .flag-placeholder {
            width: 100%;
            text-align: center;
            color: #ffd700;
            font-weight: bold;
            padding: 20px;
        }

        .flag-placeholder i {
            font-size: 3rem;
            margin-bottom: 10px;
            display: block;
        }

        header {
            text-align: center;
            padding: 25px;
            margin-bottom: 30px;
            background: rgba(10, 61, 98, 0.9);
            border-radius: 0 0 15px 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            border: 2px solid #ffd700;
            backdrop-filter: blur(10px);
        }

        .header-title {
            font-size: 2.8rem;
            color: #ffd700;
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .header-title::before, .header-title::after {
            content: "♞";
            color: #ffd700;
            margin: 0 20px;
            font-size: 2rem;
        }

        .header-subtitle {
            font-size: 1.3rem;
            color: #e0f7ff;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
            font-weight: 300;
        }

        .independence-date {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #0a3d62;
            padding: 10px 30px;
            border-radius: 30px;
            display: inline-block;
            margin-top: 20px;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(255, 215, 0, 0.3);
            border: 2px solid #0a3d62;
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .wheel-section {
            flex: 1;
            min-width: 500px;
            max-width: 600px;
            background: rgba(10, 61, 98, 0.85);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 2px solid #ffd700;
            backdrop-filter: blur(10px);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .questions-section {
            flex: 1;
            min-width: 500px;
            max-width: 600px;
            background: rgba(10, 61, 98, 0.85);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 2px solid #ffd700;
            backdrop-filter: blur(10px);
        }

        .section-title {
            font-size: 1.6rem;
            color: #ffd700;
            margin-bottom: 25px;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 215, 0, 0.5);
            position: relative;
            font-weight: 600;
        }

        .wheel-container {
            position: relative;
            width: 100%;
            padding-top: 100%;
            margin-bottom: 10px;
        }

        .wheel-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #wheel {
            width: 90%;
            height: 90%;
            position: relative;
            transition: transform 5s cubic-bezier(0.17, 0.67, 0.21, 0.99);
            border-radius: 50%;
            overflow: hidden;
        }

        .wheel-center {
            position: absolute;
            width: 110px;
            height: 110px;
            border-radius: 50%;
            z-index: 10;
            border: 5px solid #ffd700;
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.6);
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            overflow: hidden;
            background: #0a3d62;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .wheel-center:hover {
            transform: translate(-50%, -50%) scale(1.05);
            box-shadow: 0 0 35px rgba(255, 215, 0, 0.8);
        }

        #kazakhEmblem {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 50%;
        }

        .emblem-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #ffd700;
            text-align: center;
            font-size: 0.8rem;
            padding: 10px;
        }

        .emblem-placeholder i {
            font-size: 2.5rem;
            margin-bottom: 5px;
        }

        .pointer {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 35px;
            height: 55px;
            background: linear-gradient(to bottom, #ff3333, #cc0000);
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            z-index: 5;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            box-shadow: 0 5px 15px rgba(204, 0, 0, 0.4);
        }

        .no-questions-text {
            text-align: center;
            color: #a0d2ff;
            font-size: 1.2rem;
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 175, 202, 0.2);
            border-radius: 10px;
            border: 1px dashed #ffd700;
            display: none;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        #resetBtn {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #0a3d62;
            border: 2px solid #0a3d62;
        }

        #resetBtn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(255, 215, 0, 0.4);
        }

        #deleteResultBtn {
            background: linear-gradient(135deg, #ff6b6b, #ff5252);
            color: white;
            border: 2px solid #ffd700;
            display: none;
        }

        #deleteResultBtn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(255, 107, 107, 0.4);
        }

        .spin-instruction {
            text-align: center;
            color: #ffd700;
            margin-top: 15px;
            font-size: 1rem;
            font-weight: 500;
        }

        .question-input {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        #questionInput {
            flex: 1;
            padding: 16px;
            border-radius: 10px;
            border: 2px solid #ffd700;
            background: rgba(255, 255, 255, 0.95);
            font-size: 1rem;
            color: #0a3d62;
            transition: all 0.3s;
        }

        #questionInput:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.3);
        }

        #addQuestionBtn {
            background: linear-gradient(135deg, #00afca, #1e5f8a);
            color: white;
            border-radius: 10px;
            padding: 0 25px;
            font-weight: 600;
            border: 2px solid #ffd700;
        }

        #addQuestionBtn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(0, 175, 202, 0.4);
        }

        .questions-list {
            max-height: 320px;
            overflow-y: auto;
            padding-right: 10px;
            margin-top: 20px;
        }

        .question-item {
            background: rgba(30, 95, 138, 0.6);
            padding: 16px;
            margin-bottom: 12px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 5px solid #ffd700;
            transition: all 0.3s ease;
        }

        .question-item:hover {
            transform: translateX(5px);
            background: rgba(30, 95, 138, 0.8);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .question-text {
            flex: 1;
            word-break: break-word;
            color: #f0f8ff;
            font-size: 1rem;
        }

        .delete-btn {
            background: linear-gradient(135deg, #ff6b6b, #ff5252);
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-left: 15px;
            transition: all 0.3s ease;
        }

        .delete-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .result {
            text-align: center;
            padding: 25px;
            margin-top: 20px;
            background: linear-gradient(135deg, #00afca, #1e5f8a);
            border-radius: 12px;
            border: 3px solid #ffd700;
            display: none;
            animation: fadeIn 0.5s;
            color: white;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result h3 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 1.5rem;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }

        #resultText {
            font-size: 1.4rem;
            font-weight: 600;
            line-height: 1.5;
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }

        .result-controls {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .result-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .delete-result-btn {
            background: linear-gradient(135deg, #ff6b6b, #ff5252);
            color: white;
        }

        .delete-result-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .keep-result-btn {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
        }

        .keep-result-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .empty-message {
            text-align: center;
            color: #a0d2ff;
            font-style: italic;
            padding: 25px;
            background: rgba(30, 95, 138, 0.4);
            border-radius: 12px;
            border: 2px dashed #ffd700;
        }

        .save-load-section {
            margin-top: 25px;
            padding: 20px;
            background: rgba(30, 95, 138, 0.4);
            border-radius: 10px;
            border: 1px solid #ffd700;
        }

        .save-load-title {
            color: #ffd700;
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .save-load-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 15px;
        }

        .save-load-btn {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            min-width: 200px;
            justify-content: center;
        }

        .save-load-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .save-load-btn.import {
            background: linear-gradient(135deg, #2196F3, #0D47A1);
        }

        .save-load-btn.import:hover {
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4);
        }

        .save-load-btn.default {
            background: linear-gradient(135deg, #9C27B0, #6A1B9A);
        }

        .save-load-btn.default:hover {
            box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
        }

        .save-load-btn.clear {
            background: linear-gradient(135deg, #f44336, #c62828);
        }

        .save-load-btn.clear:hover {
            box-shadow: 0 5px 15px rgba(244, 67, 54, 0.4);
        }

        .save-load-hint {
            color: #a0d2ff;
            font-size: 0.9rem;
            text-align: center;
            line-height: 1.4;
            margin-top: 10px;
        }

        .file-input {
            display: none;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 25px;
            background: rgba(10, 61, 98, 0.9);
            border-radius: 15px;
            border: 2px solid #ffd700;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
        }

        .footer-text {
            color: #ffd700;
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .footer-subtext {
            color: #e0f7ff;
            font-size: 1rem;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .kazakh-symbols {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .kazakh-symbol {
            width: 40px;
            height: 40px;
            background: #ffd700;
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
        }

        .credits {
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 215, 0, 0.3);
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .author-credit {
            font-size: 0.75rem;
            color: #a0d2ff;
            opacity: 0.8;
        }

        .ai-credit {
            font-size: 0.7rem;
            color: #8bb8e8;
            opacity: 0.6;
        }

        @media (max-width: 1100px) {
            .main-content {
                flex-direction: column;
                align-items: center;
            }
            
            .wheel-section, .questions-section {
                min-width: 90%;
            }
        }

        @media (max-width: 600px) {
            .header-title {
                font-size: 2rem;
            }
            
            .flag-container {
                height: 120px;
            }
            
            .wheel-center {
                width: 90px;
                height: 90px;
            }
            
            .question-input {
                flex-direction: column;
            }
            
            button {
                width: 100%;
                justify-content: center;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .save-load-buttons {
                flex-direction: column;
            }
            
            .save-load-btn {
                width: 100%;
            }
            
            .language-switcher {
                top: 10px;
                right: 10px;
                flex-direction: column;
                padding: 5px;
            }
            
            .lang-btn {
                padding: 6px 12px;
                font-size: 0.9rem;
            }
            
            .author-credit {
                font-size: 0.7rem;
            }
            
            .ai-credit {
                font-size: 0.65rem;
            }
            
            .result-controls {
                flex-direction: column;
            }
            
            .result-btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="dark-bg"></div>
    
    <div class="language-switcher">
        <button class="lang-btn active" id="langRu">
            <div class="lang-flag ru-flag"></div>
            Русский
        </button>
        <button class="lang-btn" id="langKz">
            <div class="lang-flag kz-flag"></div> 
            Қазақша
        </button>
    </div>
    
    <div class="container">
        <div class="flag-container">
            <img id="kazakhFlag" src="" alt="Флаг Казахстана">
            <div class="flag-placeholder" id="flagPlaceholder">
                <i class="fas fa-flag"></i>
                <div>Загружаем флаг Казахстана...</div>
            </div>
        </div>
        
        <header>
            <h1 class="header-title" id="title">Ойын Дөңгелегі</h1>
            <p class="header-subtitle" id="subtitle">Казахстанская игра-викторина в честь Дня Независимости Республики Казахстан</p>
            <div class="independence-date" id="independenceDate">16 декабря 1991 года - День Независимости</div>
        </header>
        
        <main class="main-content">
            <section class="wheel-section">
                <h2 class="section-title" id="wheelTitle"><i class="fas fa-star-of-life"></i> Вращайте колесо <i class="fas fa-star-of-life"></i></h2>
                
                <div class="wheel-container">
                    <div class="wheel-wrapper">
                        <div class="pointer"></div>
                        <canvas id="wheel"></canvas>
                        <div class="wheel-center" id="spinCenter">
                            <img id="kazakhEmblem" src="" alt="Герб Казахстана">
                            <div class="emblem-placeholder" id="emblemPlaceholder">
                                <i class="fas fa-crown"></i>
                                <div>Загружаем герб...</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="no-questions-text" id="noQuestionsText">
                    <i class="fas fa-info-circle"></i> <span id="noQuestionsTextContent">Добавьте вопросы в правой части экрана, чтобы начать игру</span>
                </div>
                
                <p class="spin-instruction" id="spinInstruction">Нажмите на герб в центре колеса, чтобы начать вращение</p>
                
                <div class="controls">
                    <button id="resetBtn">
                        <i class="fas fa-sync-alt"></i> <span id="resetBtnText">Сбросить колесо</span>
                    </button>
                    
                    <button id="deleteResultBtn">
                        <i class="fas fa-trash-alt"></i> <span id="deleteResultBtnText">Удалить выпавший вопрос</span>
                    </button>
                </div>
                
                <div class="result" id="resultContainer">
                    <h3 id="resultTitle">Выбранный вопрос:</h3>
                    <p id="resultText"></p>
                    
                    <div class="result-controls">
                        <button class="result-btn delete-result-btn" id="deleteQuestionBtn">
                            <i class="fas fa-trash-alt"></i> <span id="deleteQuestionBtnText">Удалить этот вопрос</span>
                        </button>
                        <button class="result-btn keep-result-btn" id="keepQuestionBtn">
                            <i class="fas fa-check"></i> <span id="keepQuestionBtnText">Оставить вопрос</span>
                        </button>
                    </div>
                </div>
            </section>
            
            <section class="questions-section">
                <h2 class="section-title" id="questionsTitle"><i class="fas fa-question-circle"></i> Ваши вопросы о Казахстане</h2>
                
                <div class="question-input">
                    <input type="text" id="questionInput" placeholder="Введите вопрос о Казахстане...">
                    <button id="addQuestionBtn"><i class="fas fa-plus"></i> <span id="addQuestionBtnText">Добавить</span></button>
                </div>
                
                <h3 class="section-title" style="font-size: 1.3rem;" id="questionsListTitle">Список вопросов:</h3>
                
                <div class="questions-list" id="questionsList">
                    <div class="empty-message" id="emptyMessage">Пока нет вопросов. Добавьте первый вопрос выше!</div>
                </div>
                
                <div class="save-load-section">
                    <h4 class="save-load-title" id="saveLoadTitle">Сохранение и загрузка вопросов</h4>
                    
                    <div class="save-load-buttons">
                        <button class="save-load-btn" id="exportBtn">
                            <i class="fas fa-download"></i> <span id="exportBtnText">Сохранить вопросы в файл</span>
                        </button>
                        
                        <button class="save-load-btn import" id="importBtn">
                            <i class="fas fa-upload"></i> <span id="importBtnText">Загрузить вопросы из файла</span>
                        </button>
                        
                        <button class="save-load-btn default" id="loadDefaultBtn">
                            <i class="fas fa-chalkboard-teacher"></i> <span id="loadDefaultBtnText">Загрузить примеры вопросов</span>
                        </button>
                        
                        <button class="save-load-btn clear" id="clearAllBtn">
                            <i class="fas fa-trash-alt"></i> <span id="clearAllBtnText">Очистить все вопросы</span>
                        </button>
                    </div>
                    
                    <input type="file" id="importFile" class="file-input" accept=".json,.txt">
                    
                    <p class="save-load-hint" id="saveLoadHint">
                        <strong>Как пользоваться:</strong><br>
                        1. Сохраните вопросы в файл → откроется на любом устройстве<br>
                        2. Загрузите файл с вопросами → восстановите список<br>
                        3. Вопросы автоматически сохраняются в браузере
                    </p>
                </div>
            </section>
        </main>
        
        <footer>
            <p class="footer-text" id="footerText">С Днем Независимости Республики Казахстан!</p>
            <p class="footer-subtext" id="footerSubtext">Этот проект символизирует единство народа Казахстана и его богатое культурное наследие</p>
            <div class="kazakh-symbols">
                <div class="kazakh-symbol"></div>
                <div class="kazakh-symbol"></div>
                <div class="kazakh-symbol"></div>
            </div>
            
            <div class="credits">
                <div class="author-credit">Сделано Учеником 11 В Пикулиным Артемом</div>
                <div class="ai-credit">использовался Deepseek</div>
            </div>
        </footer>
    </div>

    <script>
        // Глобальные переменные
        let questions = [];
        let isSpinning = false;
        let currentRotation = 0;
        let lastSelectedQuestionIndex = -1;
        let lastSelectedQuestionText = "";
        let currentLanguage = 'ru'; // 'ru' или 'kz'
        
        // DOM элементы
        const canvas = document.getElementById('wheel');
        const ctx = canvas.getContext('2d');
        const questionInput = document.getElementById('questionInput');
        const addQuestionBtn = document.getElementById('addQuestionBtn');
        const questionsList = document.getElementById('questionsList');
        const resultText = document.getElementById('resultText');
        const resultContainer = document.getElementById('resultContainer');
        const noQuestionsText = document.getElementById('noQuestionsText');
        const spinCenter = document.getElementById('spinCenter');
        const resetBtn = document.getElementById('resetBtn');
        const deleteResultBtn = document.getElementById('deleteResultBtn');
        const deleteQuestionBtn = document.getElementById('deleteQuestionBtn');
        const keepQuestionBtn = document.getElementById('keepQuestionBtn');
        
        // Тексты для перевода
        const translations = {
            ru: {
                title: "Ойын Дөңгелегі",
                subtitle: "Казахстанская игра-викторина в честь Дня Независимости Республики Казахстан",
                independenceDate: "16 декабря 1991 года - День Независимости",
                wheelTitle: "Вращайте колесо",
                spinInstruction: "Нажмите на герб в центре колеса, чтобы начать вращение",
                resetBtnText: "Сбросить колесо",
                deleteResultBtnText: "Удалить выпавший вопрос",
                resultTitle: "Выбранный вопрос:",
                deleteQuestionBtnText: "Удалить этот вопрос",
                keepQuestionBtnText: "Оставить вопрос",
                questionsTitle: "Ваши вопросы о Казахстане",
                questionInputPlaceholder: "Введите вопрос о Казахстане...",
                addQuestionBtnText: "Добавить",
                questionsListTitle: "Список вопросов:",
                noQuestionsTextContent: "Добавьте вопросы в правой части экрана, чтобы начать игру",
                emptyMessage: "Пока нет вопросов. Добавьте первый вопрос выше!",
                saveLoadTitle: "Сохранение и загрузка вопросов",
                exportBtnText: "Сохранить вопросы в файл",
                importBtnText: "Загрузить вопросы из файла",
                loadDefaultBtnText: "Загрузить примеры вопросов",
                clearAllBtnText: "Очистить все вопросы",
                saveLoadHint: `<strong>Как пользоваться:</strong><br>
                               1. Сохраните вопросы в файл → откроется на любом устройстве<br>
                               2. Загрузите файл с вопросами → восстановите список<br>
                               3. Вопросы автоматически сохраняются в браузере`,
                footerText: "С Днем Независимости Республики Казахстан!",
                footerSubtext: "Этот проект символизирует единство народа Казахстана и его богатое культурное наследие",
                defaultQuestions: [
                    "Столица Казахстана?",
                    "День Независимости Казахстана?",
                    "Национальная валюта Казахстана?",
                    "Традиционное жилище кочевников?",
                    "Первый космодром в мире?",
                    "Национальный музыкальный инструмент?",
                    "Государственный язык?",
                    "Крупнейший город по населению?",
                    "Знаменитый мавзолей в Туркестане?",
                    "Известное лечебное озеро?"
                ]
            },
            kz: {
                title: "Ойын Дөңгелегі",
                subtitle: "Қазақстан Республикасының Тәуелсіздік күніне арналған викторина ойыны",
                independenceDate: "16 желтоқсан 1991 жыл - Тәуелсіздік күні",
                wheelTitle: "Дөңгелекті айналдырыңыз",
                spinInstruction: "Айналуды бастау үшін ортадағы елтаңбаны басыңыз",
                resetBtnText: "Дөңгелекті қалпына келтіру",
                deleteResultBtnText: "Түскен сұрақты жою",
                resultTitle: "Таңдалған сұрақ:",
                deleteQuestionBtnText: "Бұл сұрақты жою",
                keepQuestionBtnText: "Сұрақты қалдыру",
                questionsTitle: "Қазақстан туралы сұрақтарыңыз",
                questionInputPlaceholder: "Қазақстан туралы сұрақ енгізіңіз...",
                addQuestionBtnText: "Қосу",
                questionsListTitle: "Сұрақтар тізімі:",
                noQuestionsTextContent: "Ойынды бастау үшін оң жақ бөлікке сұрақтар қосыңыз",
                emptyMessage: "Әлі сұрақтар жоқ. Жоғарыда бірінші сұрақты қосыңыз!",
                saveLoadTitle: "Сұрақтарды сақтау және жүктеу",
                exportBtnText: "Сұрақтарды файлға сақтау",
                importBtnText: "Файлдан сұрақтарды жүктеу",
                loadDefaultBtnText: "Мысал сұрақтарды жүктеу",
                clearAllBtnText: "Барлық сұрақтарды тазалау",
                saveLoadHint: `<strong>Қолдану нұсқаулығы:</strong><br>
                               1. Сұрақтарды файлға сақтаңыз → кез келген құрылғыда ашылады<br>
                               2. Сұрақтары бар файлды жүктеңіз → тізім қалпына келеді<br>
                               3. Сұрақтар браузерде автоматты түрде сақталады`,
                footerText: "Қазақстан Республикасының Тәуелсіздік күнімен!",
                footerSubtext: "Бұл жоба Қазақстан халқының бірлігін және оның бай мәдени мұрасын бейнелейді",
                defaultQuestions: [
                    "Қазақстанның астанасы?",
                    "Қазақстанның Тәуелсіздік күні?",
                    "Қазақстанның ұлттық валютасы?",
                    "Көшпелілердің дәстүрлі тұрғын үйі?",
                    "Әлемдегі алғашқы ғарыш айлағы?",
                    "Ұлттық музыкалық аспап?",
                    "Мемлекеттік тіл?",
                    "Халқы ең көп қала?",
                    "Түркістандағы атақты кесене?",
                    "Атақты емдік көл?"
                ]
            }
        };
        
        // Цвета для секций
        const colors = ['#1e5f8a', '#00afca', '#0a3d62', '#ffd700', '#ff9800', '#4caf50'];
        
        // Загрузка изображений
        function loadImages() {
            const flagImg = document.getElementById('kazakhFlag');
            const emblemImg = document.getElementById('kazakhEmblem');
            const flagPlaceholder = document.getElementById('flagPlaceholder');
            const emblemPlaceholder = document.getElementById('emblemPlaceholder');
            
            // Загружаем флаг
            flagImg.onload = function() {
                flagPlaceholder.style.display = 'none';
            };
            flagImg.src = 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Flag_of_Kazakhstan.svg/2560px-Flag_of_Kazakhstan.svg.png';
            
            // Загружаем герб
            emblemImg.onload = function() {
                emblemPlaceholder.style.display = 'none';
            };
            emblemImg.src = 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/Emblem_of_Kazakhstan_latin.svg/960px-Emblem_of_Kazakhstan_latin.svg.png';
        }
        
        // Сохранение в LocalStorage
        function saveQuestions() {
            localStorage.setItem('kazakhstanQuestions', JSON.stringify(questions));
        }
        
        // Загрузка из LocalStorage
        function loadQuestions() {
            const saved = localStorage.getItem('kazakhstanQuestions');
            if (saved) {
                try {
                    questions = JSON.parse(saved);
                } catch(e) {
                    questions = [];
                }
            }
        }
        
        // Отрисовка колеса
        function drawWheel() {
            const size = Math.min(canvas.width, canvas.height);
            const centerX = size / 2;
            const centerY = size / 2;
            const radius = size / 2 - 20;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            if (questions.length === 0) {
                // Рисуем пустое колесо
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
                ctx.fillStyle = 'rgba(10, 61, 98, 0.7)';
                ctx.fill();
                ctx.strokeStyle = '#ffd700';
                ctx.lineWidth = 4;
                ctx.stroke();
                noQuestionsText.style.display = 'block';
                return;
            } else {
                noQuestionsText.style.display = 'none';
            }
            
            const arcAngle = (2 * Math.PI) / questions.length;
            
            // Рисуем секции
            for (let i = 0; i < questions.length; i++) {
                const startAngle = i * arcAngle + currentRotation;
                const endAngle = (i + 1) * arcAngle + currentRotation;
                
                // Секция
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, startAngle, endAngle);
                ctx.closePath();
                ctx.fillStyle = colors[i % colors.length];
                ctx.fill();
                
                // Граница
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // Текст
                ctx.save();
                ctx.translate(centerX, centerY);
                ctx.rotate(startAngle + arcAngle / 2);
                ctx.translate(radius * 0.65, 0);
                ctx.rotate(Math.PI / 2);
                ctx.textAlign = 'center';
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 12px Arial';
                ctx.shadowColor = 'rgba(0, 0, 0, 0.7)';
                ctx.shadowBlur = 3;
                
                let displayText = questions[i];
                if (displayText.length > 15) {
                    displayText = displayText.substring(0, 15) + '...';
                }
                
                ctx.fillText(displayText, 0, 0);
                ctx.restore();
            }
            
            // Граница колеса
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.strokeStyle = '#ffd700';
            ctx.lineWidth = 4;
            ctx.stroke();
        }
        
        // Вращение колеса
        function spinWheel() {
            if (isSpinning || questions.length < 2) {
                if (questions.length < 2) {
                    alert(currentLanguage === 'ru' ? 'Добавьте хотя бы 2 вопроса!' : 'Кемінде 2 сұрақ қосыңыз!');
                }
                return;
            }
            
            isSpinning = true;
            resultContainer.style.display = 'none';
            deleteResultBtn.style.display = 'none';
            
            const spins = 5 + Math.random() * 3;
            lastSelectedQuestionIndex = Math.floor(Math.random() * questions.length);
            const targetAngle = lastSelectedQuestionIndex * (2 * Math.PI / questions.length);
            const totalRotation = spins * 2 * Math.PI + targetAngle - currentRotation % (2 * Math.PI);
            
            const startTime = Date.now();
            const duration = 5000;
            const startRotation = currentRotation;
            
            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easeProgress = 1 - Math.pow(1 - progress, 3);
                
                currentRotation = startRotation + totalRotation * easeProgress;
                drawWheel();
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    isSpinning = false;
                    showResult(lastSelectedQuestionIndex);
                }
            }
            
            animate();
        }
        
        // Показать результат
        function showResult(sectionIndex) {
            lastSelectedQuestionText = questions[sectionIndex];
            resultText.textContent = lastSelectedQuestionText;
            resultContainer.style.display = 'block';
            deleteResultBtn.style.display = 'flex';
            deleteResultBtn.disabled = false;
        }
        
        // Удалить выпавший вопрос
        function deleteSelectedQuestion() {
            if (lastSelectedQuestionIndex === -1) {
                alert(currentLanguage === 'ru' ? 'Нет выбранного вопроса для удаления' : 'Жою үшін таңдалған сұрақ жоқ');
                return;
            }
            
            if (confirm(currentLanguage === 'ru' ? 'Удалить этот вопрос из списка?' : 'Бұл сұрақты тізімнен жойсыз ба?')) {
                // Удаляем вопрос из массива
                questions.splice(lastSelectedQuestionIndex, 1);
                
                // Обновляем интерфейс
                updateQuestionsList();
                drawWheel();
                saveQuestions();
                
                // Скрываем результат и кнопку удаления
                resultContainer.style.display = 'none';
                deleteResultBtn.style.display = 'none';
                
                // Сбрасываем индекс
                lastSelectedQuestionIndex = -1;
                lastSelectedQuestionText = "";
                
                alert(currentLanguage === 'ru' ? 'Вопрос удален!' : 'Сұрақ жойылды!');
            }
        }
        
        // Добавить вопрос
        function addQuestion() {
            const question = questionInput.value.trim();
            if (!question) {
                alert(currentLanguage === 'ru' ? 'Введите вопрос!' : 'Сұрақ енгізіңіз!');
                return;
            }
            
            questions.push(question);
            questionInput.value = '';
            updateQuestionsList();
            drawWheel();
            saveQuestions();
        }
        
        // Обновить список вопросов
        function updateQuestionsList() {
            questionsList.innerHTML = '';
            
            if (questions.length === 0) {
                const emptyMsg = document.getElementById('emptyMessage');
                if (emptyMsg) {
                    emptyMsg.textContent = translations[currentLanguage].emptyMessage;
                    questionsList.appendChild(emptyMsg);
                } else {
                    const newEmptyMsg = document.createElement('div');
                    newEmptyMsg.className = 'empty-message';
                    newEmptyMsg.id = 'emptyMessage';
                    newEmptyMsg.textContent = translations[currentLanguage].emptyMessage;
                    questionsList.appendChild(newEmptyMsg);
                }
                return;
            }
            
            questions.forEach((question, index) => {
                const questionItem = document.createElement('div');
                questionItem.className = 'question-item';
                questionItem.innerHTML = `
                    <span class="question-text">${index + 1}. ${question}</span>
                    <button class="delete-btn" data-index="${index}"><i class="fas fa-times"></i></button>
                `;
                questionsList.appendChild(questionItem);
            });
            
            // Обработчики удаления
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    questions.splice(index, 1);
                    updateQuestionsList();
                    drawWheel();
                    saveQuestions();
                    
                    // Если удаляем тот же вопрос, который выпал
                    if (index === lastSelectedQuestionIndex) {
                        resultContainer.style.display = 'none';
                        deleteResultBtn.style.display = 'none';
                        lastSelectedQuestionIndex = -1;
                    }
                });
            });
        }
        
        // Сброс колеса
        function resetWheel() {
            currentRotation = 0;
            resultContainer.style.display = 'none';
            deleteResultBtn.style.display = 'none';
            lastSelectedQuestionIndex = -1;
            drawWheel();
        }
        
        // Экспорт вопросов
        function exportQuestions() {
            if (questions.length === 0) {
                alert(currentLanguage === 'ru' ? 'Нет вопросов для сохранения' : 'Сақтау үшін сұрақтар жоқ');
                return;
            }
            
            const data = {
                questions: questions,
                date: new Date().toLocaleString(),
                language: currentLanguage
            };
            
            const json = JSON.stringify(data, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = currentLanguage === 'ru' ? `вопросы_казахстан.json` : `suraqtar_kazakstan.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert(currentLanguage === 'ru' ? 'Вопросы сохранены в файл!' : 'Сұрақтар файлға сақталды!');
        }
        
        // Импорт вопросов
        function importQuestions(file) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    if (data.questions && Array.isArray(data.questions)) {
                        questions = data.questions.filter(q => q && q.trim());
                        updateQuestionsList();
                        drawWheel();
                        saveQuestions();
                        alert(currentLanguage === 'ru' ? 'Вопросы загружены!' : 'Сұрақтар жүктелді!');
                    } else {
                        alert(currentLanguage === 'ru' ? 'Неверный формат файла' : 'Файл пішімі дұрыс емес');
                    }
                } catch (error) {
                    alert(currentLanguage === 'ru' ? 'Ошибка загрузки файла' : 'Файлды жүктеу кезінде қате орын алды');
                }
            };
            
            reader.readAsText(file);
        }
        
        // Загрузка примеров
        function loadDefaultQuestions() {
            if (confirm(currentLanguage === 'ru' ? 
                'Загрузить примеры вопросов о Казахстане?' : 
                'Қазақстан туралы мысал сұрақтарды жүктейсіз бе?')) {
                questions = [...translations[currentLanguage].defaultQuestions];
                updateQuestionsList();
                drawWheel();
                saveQuestions();
            }
        }
        
        // Очистка всех вопросов
        function clearAllQuestions() {
            if (confirm(currentLanguage === 'ru' ? 'Удалить все вопросы?' : 'Барлық сұрақтарды жойсыз ба?')) {
                questions = [];
                updateQuestionsList();
                drawWheel();
                saveQuestions();
                resultContainer.style.display = 'none';
                deleteResultBtn.style.display = 'none';
                lastSelectedQuestionIndex = -1;
            }
        }
        
        // Переключение языка
        function switchLanguage(lang) {
            currentLanguage = lang;
            
            // Обновляем активную кнопку
            document.getElementById('langRu').classList.toggle('active', lang === 'ru');
            document.getElementById('langKz').classList.toggle('active', lang === 'kz');
            
            // Получаем текущие переводы
            const t = translations[lang];
            
            // Обновляем все тексты
            document.getElementById('title').textContent = t.title;
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('independenceDate').textContent = t.independenceDate;
            document.getElementById('wheelTitle').innerHTML = `<i class="fas fa-star-of-life"></i> ${t.wheelTitle} <i class="fas fa-star-of-life"></i>`;
            document.getElementById('spinInstruction').textContent = t.spinInstruction;
            document.getElementById('resetBtnText').textContent = t.resetBtnText;
            document.getElementById('deleteResultBtnText').textContent = t.deleteResultBtnText;
            document.getElementById('resultTitle').textContent = t.resultTitle;
            document.getElementById('deleteQuestionBtnText').textContent = t.deleteQuestionBtnText;
            document.getElementById('keepQuestionBtnText').textContent = t.keepQuestionBtnText;
            document.getElementById('questionsTitle').innerHTML = `<i class="fas fa-question-circle"></i> ${t.questionsTitle}`;
            document.getElementById('questionInput').placeholder = t.questionInputPlaceholder;
            document.getElementById('addQuestionBtnText').textContent = t.addQuestionBtnText;
            document.getElementById('questionsListTitle').textContent = t.questionsListTitle;
            document.getElementById('noQuestionsTextContent').textContent = t.noQuestionsTextContent;
            document.getElementById('saveLoadTitle').textContent = t.saveLoadTitle;
            document.getElementById('exportBtnText').textContent = t.exportBtnText;
            document.getElementById('importBtnText').textContent = t.importBtnText;
            document.getElementById('loadDefaultBtnText').textContent = t.loadDefaultBtnText;
            document.getElementById('clearAllBtnText').textContent = t.clearAllBtnText;
            document.getElementById('saveLoadHint').innerHTML = t.saveLoadHint;
            document.getElementById('footerText').textContent = t.footerText;
            document.getElementById('footerSubtext').textContent = t.footerSubtext;
            
            // Обновляем пустое сообщение, если оно отображается
            const emptyMsg = document.getElementById('emptyMessage');
            if (emptyMsg) {
                emptyMsg.textContent = t.emptyMessage;
            }
            
            // Сохраняем язык в localStorage
            localStorage.setItem('kazakhstanGameLanguage', lang);
        }
        
        // Адаптивный размер canvas
        function resizeCanvas() {
            const container = document.querySelector('.wheel-wrapper');
            const size = Math.min(container.offsetWidth, container.offsetHeight);
            canvas.width = size;
            canvas.height = size;
            drawWheel();
        }
        
        // Инициализация
        function init() {
            // Загружаем изображения
            loadImages();
            
            // Загружаем вопросы
            loadQuestions();
            
            // Загружаем сохраненный язык
            const savedLang = localStorage.getItem('kazakhstanGameLanguage');
            if (savedLang === 'kz' || savedLang === 'ru') {
                currentLanguage = savedLang;
                document.getElementById('langRu').classList.toggle('active', savedLang === 'ru');
                document.getElementById('langKz').classList.toggle('active', savedLang === 'kz');
            }
            
            // Применяем язык
            switchLanguage(currentLanguage);
            
            // Рисуем колесо
            drawWheel();
            updateQuestionsList();
            
            // Основные обработчики
            spinCenter.addEventListener('click', spinWheel);
            resetBtn.addEventListener('click', resetWheel);
            addQuestionBtn.addEventListener('click', addQuestion);
            
            // Кнопка удаления выпавшего вопроса
            deleteResultBtn.addEventListener('click', deleteSelectedQuestion);
            deleteQuestionBtn.addEventListener('click', deleteSelectedQuestion);
            
            // Кнопка оставить вопрос
            keepQuestionBtn.addEventListener('click', function() {
                resultContainer.style.display = 'none';
                deleteResultBtn.style.display = 'none';
            });
            
            // Добавление по Enter
            questionInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addQuestion();
            });
            
            // Кнопки сохранения/загрузки
            document.getElementById('exportBtn').addEventListener('click', exportQuestions);
            document.getElementById('importBtn').addEventListener('click', function() {
                document.getElementById('importFile').click();
            });
            document.getElementById('importFile').addEventListener('change', function(e) {
                if (e.target.files[0]) importQuestions(e.target.files[0]);
            });
            document.getElementById('loadDefaultBtn').addEventListener('click', loadDefaultQuestions);
            document.getElementById('clearAllBtn').addEventListener('click', clearAllQuestions);
            
            // Переключение языка
            document.getElementById('langRu').addEventListener('click', function() {
                switchLanguage('ru');
            });
            
            document.getElementById('langKz').addEventListener('click', function() {
                switchLanguage('kz');
            });
            
            // Ресайз
            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();
        }
        
        // Запуск
        window.addEventListener('load', init);
    </script>
</body>
</html>
